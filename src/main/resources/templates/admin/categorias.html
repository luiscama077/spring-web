<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">
<head th:replace="~{fragments/header :: head}"></head>
<body class="bg-gray-900 min-h-screen">
    
    <!-- Navbar -->
    <div th:replace="~{fragments/navbar :: navbar-admin}"></div>

    <div class="flex">
        <!-- Sidebar -->
        <div th:replace="~{fragments/navbar :: sidebar-admin(seccion='categorias')}"></div>

		<!-- Overlay -->
		<div th:replace="~{fragments/navbar :: sidebar-overlay}"></div>

        <!-- Main Content -->
        <main class="flex-1 p-4 sm:p-6 lg:p-8">
            <div class="max-w-6xl mx-auto">
                
                <!-- Header -->
                <div class="flex justify-between items-center mb-8">
                    <div>
                        <h2 class="text-3xl font-bold text-white">Categorías</h2>
                        <p class="text-gray-400 mt-1">Gestión de categorías de productos</p>
                    </div>
                    <a href="/admin/categorias/nueva" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-3 rounded-lg transition flex items-center gap-2 shadow-lg shadow-blue-600/20">
                        <i data-lucide="plus" class="inline size-5"></i>
                        <span>Nueva Categoría</span>
                    </a>
                </div>

                <!-- Mensajes -->
                <div th:if="${mensaje}" 
                     th:classappend="${tipo == 'success' ? 'bg-green-500/10 border-green-500/50 text-green-400' : 'bg-red-500/10 border-red-500/50 text-red-400'}"
                     class="border px-4 py-3 rounded-lg mb-6 backdrop-blur-sm">
                    <p th:text="${mensaje}">Mensaje</p>
                </div>

                <!-- Grid de Categorías -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    
                    <div th:if="${categorias.empty}" class="col-span-full">
                        <div class="bg-gray-800/50 rounded-xl p-12 text-center border border-gray-700/50 backdrop-blur-sm">
                            <i data-lucide="folder-x" class="inline size-12 text-gray-600 mb-3"></i>
                            <p class="text-gray-500">No hay categorías registradas</p>
                        </div>
                    </div>

                    <!-- Tarjeta de Categoría -->
                    <div th:each="categoria : ${categorias}" class="bg-gray-800/50 rounded-xl p-6 border border-gray-700/50 hover:border-blue-500/50 hover:shadow-lg hover:shadow-blue-500/10 transition-all backdrop-blur-sm">
                        <div class="flex justify-between items-start mb-4">
                            <div class="flex-1">
                                <h3 class="text-xl font-bold text-white mb-2" th:text="${categoria.nombre}">Categoría</h3>
                                <p class="text-gray-400 text-sm line-clamp-2" th:text="${categoria.descripcion}">Descripción</p>
                            </div>
                            <span th:if="${categoria.activo}" class="px-3 py-1 bg-green-500/20 text-green-400 rounded-full text-xs font-semibold border border-green-500/30 ml-3">
                                Activa
                            </span>
                            <span th:unless="${categoria.activo}" class="px-3 py-1 bg-gray-700/50 text-gray-400 rounded-full text-xs font-semibold border border-gray-600/30 ml-3">
                                Inactiva
                            </span>
                        </div>

                        <div class="text-sm text-gray-500 mb-4 space-y-1">
                            <p class="flex items-center gap-2">
                                <i data-lucide="calendar" class="inline size-4"></i>
                                <span th:text="${#temporals.format(categoria.fechaCreacion, 'dd/MM/yyyy')}">01/01/2025</span>
                            </p>
                        </div>

                        <!-- Botones de acción -->
                        <div class="flex gap-2">
                            <a th:href="@{/admin/categorias/editar/{id}(id=${categoria.id})}" 
                               class="flex-1 bg-blue-600/20 hover:bg-blue-600 text-blue-400 hover:text-white border border-blue-500/30 hover:border-blue-600 px-4 py-2 rounded-lg text-sm text-center transition-all flex items-center justify-center gap-2">
                                <i data-lucide="pencil" class="inline size-4"></i>
                                <span>Editar</span>
                            </a>
                            <a th:href="@{/admin/categorias/toggle/{id}(id=${categoria.id})}" 
                               class="bg-yellow-600/20 hover:bg-yellow-600 text-yellow-400 hover:text-white border border-yellow-500/30 hover:border-yellow-600 px-3 py-2 rounded-lg text-sm transition-all flex items-center justify-center"
                               title="Cambiar estado">
                                <i data-lucide="refresh-cw" class="inline size-4"></i>
                            </a>
                            <a th:href="@{/admin/categorias/eliminar/{id}(id=${categoria.id})}" 
                               onclick="return confirm('¿Estás seguro de eliminar esta categoría?')"
                               class="bg-red-600/20 hover:bg-red-600 text-red-400 hover:text-white border border-red-500/30 hover:border-red-600 px-2 py-2 rounded-lg text-sm transition-all flex items-center justify-center"
                               title="Eliminar">
                                <i data-lucide="trash-2" class="inline size-4"></i>
                            </a>
                        </div>
                    </div>
                </div>

            </div>
        </main>
    </div>
	
	<!-- Footer -->
	<div th:replace="~{fragments/footer :: footer}"></div>

	<!-- Scripts del sidebar-->
	<div th:replace="~{fragments/navbar :: sidebar-scripts}"></div>
</body>
</html>